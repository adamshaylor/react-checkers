(this["webpackJsonpreact-checkers"]=this["webpackJsonpreact-checkers"]||[]).push([[0],{18:function(e,n,r){},26:function(e,n,r){},27:function(e,n,r){"use strict";r.r(n);var t=r(0),o=r.n(t),l=r(7),c=r.n(l),i=(r(18),r(12)),a=r.n(i),u=r(6),s=r.n(u),f=r(1),d={red:{man:Object(f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s.a.piece,viewBox:"0 0 75 50.37",children:[Object(f.jsx)("path",{d:"M87.26,64.3C87.26,74.05,70.86,82,50.63,82S14,74.05,14,64.3V49.5H87.26Z",transform:"translate(-13 -32.08)",fill:"red",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("ellipse",{cx:"37.5",cy:"18.15",rx:"37",ry:"17.65",fill:"red",stroke:"#000",strokeMiterlimit:"10"})]}),king:Object(f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s.a.piece,viewBox:"0 0 75.08 63.38",children:[Object(f.jsx)("path",{d:"M87.26,64.3C87.26,74.05,70.86,82,50.63,82S14,74.05,14,64.3V49.5H87.26Z",transform:"translate(-12.92 -19.07)",fill:"red",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("ellipse",{cx:"37.58",cy:"31.16",rx:"37",ry:"17.65",fill:"red",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("path",{d:"M87.19,51.29c0,9.75-16.4,17.65-36.63,17.65S13.92,61,13.92,51.29V36.49H87.19Z",transform:"translate(-12.92 -19.07)",fill:"red",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("ellipse",{cx:"37.5",cy:"18.15",rx:"37",ry:"17.65",fill:"red",stroke:"#000",strokeMiterlimit:"10"})]})},white:{man:Object(f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s.a.piece,viewBox:"0 0 75 50.37",children:[Object(f.jsx)("path",{d:"M87.26,64.3C87.26,74.05,70.86,82,50.63,82S14,74.05,14,64.3V49.5H87.26Z",transform:"translate(-13 -32.08)",fill:"#fff",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("ellipse",{cx:"37.5",cy:"18.15",rx:"37",ry:"17.65",fill:"#fff",stroke:"#000",strokeMiterlimit:"10"})]}),king:Object(f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s.a.piece,viewBox:"0 0 75.08 63.38",children:[Object(f.jsx)("path",{d:"M87.26,64.3C87.26,74.05,70.86,82,50.63,82S14,74.05,14,64.3V49.5H87.26Z",transform:"translate(-12.92 -19.07)",fill:"#fff",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("ellipse",{cx:"37.58",cy:"31.16",rx:"37",ry:"17.65",fill:"red",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("path",{d:"M87.19,51.29c0,9.75-16.4,17.65-36.63,17.65S13.92,61,13.92,51.29V36.49H87.19Z",transform:"translate(-12.92 -19.07)",fill:"#fff",stroke:"#000",strokeMiterlimit:"10"}),Object(f.jsx)("ellipse",{cx:"37.5",cy:"18.15",rx:"37",ry:"17.65",fill:"#fff",stroke:"#000",strokeMiterlimit:"10"})]})}};function m(e){return d[e.color][e.rank]}var v=r(4),j=r.n(v),x=r(5),p=x.c,g=r(3),b=r(2),w=r(9),y=r(8),h="red",O="white",k="man",S={color:h,rank:k},I={color:O,rank:k},q=["nw","ne","se","sw"],M={nw:-4,ne:-3,se:5,sw:4},P={nw:-5,ne:-4,se:4,sw:3},_=function(e){return Math.floor(e/4)%2===0},N=function(e,n){return function(e,n){if(("nw"===n||"ne"===n)&&e<4)return!1;if(("sw"===n||"se"===n)&&e>=28)return!1;var r=_(e);return!!("nw"!==n&&"sw"!==n||r||e%4!==0)&&(!("ne"===n||"se"===n)||!r||(e+1)%4!==0)}(e,n)?_(e)?e+M[n]:e+P[n]:null},G=function(e,n){var r=N(e,n);return null===r?null:N(r,n)},A=function(e){return e.playerActions.slice(-1)[0]||null},B=function(e,n){return e.reduce((function(e,r,t){return r&&r.color===n?e.concat(t):e}),[])},V=function(e){return"number"===typeof e.to},H=function(e,n){return{from:e,to:N(e,n)}},W=function(e,n){return B(e,n).reduce((function(e,n){return e.concat(function(e){return q.map((function(n){return H(e,n)})).filter(V)}(n))}),[]).filter((function(n){return J(e,n)}))},Z=function(e,n){return B(e,n).reduce((function(e,n){return e.concat(E(n))}),[]).filter((function(n){return J(e,n)}))},C=function(e,n){return{from:e,to:G(e,n)}},E=function(e){return q.map((function(n){return C(e,n)})).filter(V)},T=function(e){var n=q.find((function(n){return H(e.from,n).to===e.to}));if(n)return{direction:n,type:"simple move"};var r=q.find((function(n){return C(e.from,n).to===e.to}));return r?{direction:r,type:"jump move"}:null},J=function(e,n){var r=e[n.from],t=e[n.to];if(!r||t)return!1;var o=T(n);if(!o)return!1;var l=o.type,c=o.direction;if(r.rank===k&&!function(e,n){return n===h?"sw"===e||"se"===e:"nw"===e||"ne"===e}(c,r.color))return!1;if("jump move"===l){var i=N(n.from,c);if(!i)return!1;var a=e[i];if(!a||a.color===r.color)return!1}return!0},K=function(e,n){return"red"===n?27<e&&e<=31:0<=e&&e<4},F=function(e){var n=e.rowIndex%2===0,r=e.columnIndex%2===0;return n&&!r||!n&&r?(n?(e.columnIndex-1)/2:e.columnIndex/2)+4*e.rowIndex:null},$=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],t=e[n.from];if(!t||r&&!J(e,n))throw new Error("Illegal move");var o=Object(g.a)(e);o[n.from]=null,o[n.to]=K(n.to,t.color)?Object(b.a)(Object(b.a)({},t),{},{rank:"king"}):t;var l="red"===t.color?"white":"red",c=[].concat(Object(g.a)(Z(o,l)),Object(g.a)(W(o,l))),i=0===c.length,a=i?t.color:null;return{type:"simple move",color:t.color,move:n,resultantPlayingSquaresState:o,endsTurn:!0,endsGame:i,resultantWinner:a}},z=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],t=e[n.from],o=T(n);if(!t||!o||r&&!J(e,n))throw new Error("Illegal move");var l=o.direction,c=N(n.from,l),i=Object(g.a)(e);i[n.from]=null;var a=K(n.to,t.color);i[n.to]=a?Object(b.a)(Object(b.a)({},t),{},{rank:"king"}):t,i[c]=null;var u=Z(i,t.color).filter((function(e){return e.from===n.to})),s=a||!u.length,f="red"===t.color?"white":"red",d=[].concat(Object(g.a)(Z(i,f)),Object(g.a)(W(i,f))),m=0===d.length,v=s&&m,j=v?t.color:null;return{type:"jump move",color:t.color,move:n,resultantPlayingSquaresState:i,endsTurn:s,endsGame:v,resultantWinner:j}},D={initialPlayingSquaresState:[S,S,S,S,S,S,S,S,S,S,S,S,null,null,null,null,null,null,null,null,I,I,I,I,I,I,I,I,I,I,I,I],playerActions:[],selectedPlayingSquareIndex:null},L=Object(w.b)({name:"game",initialState:D,reducers:{makeMove:function(e,n){var r=n.payload,t=T(r);if(!t)throw new Error("Illegal move");var o=function(e){var n=A(e);return n?n.resultantPlayingSquaresState:e.initialPlayingSquaresState}(e),l="jump move"===t.type?z(o,r):$(o,r);return Object(b.a)(Object(b.a)({},e),{},{playerActions:[].concat(Object(g.a)(e.playerActions),[l]),selectedPlayingSquareIndex:null})},selectPhysicalSquare:function(e,n){return Object(b.a)(Object(b.a)({},e),{},{selectedPlayingSquareIndex:n.payload?F(n.payload):null})}}}),Q=function(e){return e.game},R=function(e){return A(e.game)},U=function(e){return"number"===typeof e.game.selectedPlayingSquareIndex?function(e){return 0<=(n=e)&&n<=31?{rowIndex:Math.floor(e/4),columnIndex:_(e)?e%4*2+1:e%4*2}:null;var n}(e.game.selectedPlayingSquareIndex):null},X=(Object(y.a)([R],(function(e){return!!e&&e.endsGame})),Object(y.a)([R],(function(e){return e?e.endsGame?null:e.endsTurn?e.color===h?O:h:e.color:h}))),Y=Object(y.a)([Q,R],(function(e,n){return n?n.resultantPlayingSquaresState:e.initialPlayingSquaresState})),ee=(Object(y.a)([Q,function(e,n){return n}],(function(e,n){return e.playerActions.reduce((function(e,r){return"jump move"===r.type&&r.color===n?e+1:e}),0)})),Object(y.a)([Y,X],(function(e,n){return n?B(e,n):[]})),Object(y.a)([X,function(e){return e.game.playerActions.filter((function(e){return"simple move"===e.type||"jump move"===e.type})).slice(-1)[0]||null},Y],(function(e,n,r){if(!e)return[];var t=(null===n||void 0===n?void 0:n.color)===e&&"jump move"===(null===n||void 0===n?void 0:n.type),o=Z(r,e).filter((function(e){var r;return t?(null===n||void 0===n||null===(r=n.move)||void 0===r?void 0:r.to)===e.from:e})).map((function(e){return z(r,e,!1)}));return o.length?o:W(r,e).map((function(e){return $(r,e,!1)}))}))),ne=Object(y.a)([Y],(function(e){return Array.from({length:8},(function(n,r){return Array.from({length:8},(function(n,t){var o=F({rowIndex:r,columnIndex:t});return null!==o?{playingSquareIndex:o,piece:e[o]}:null}))}))})),re=L.actions,te=re.makeMove,oe=re.selectPhysicalSquare,le=L.reducer;function ce(){var e=p(Q),n=p(X),r=p(R),t=p(ne),o=p(U),l=p(ee),c=Object(x.b)(),i=function(e,n){var r=o&&o.rowIndex===n.rowIndex&&o.columnIndex===n.columnIndex,t=e?r?j.a.gameSquareSelected:j.a.gameSquarePlaying:j.a.gameSquareNonPlaying;return a()(j.a.gameSquare,t)};return Object(f.jsxs)("div",{className:"{styles.game}",children:[Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:t.map((function(r,a){return Object(f.jsx)("tr",{children:r.map((function(r,u){return Object(f.jsxs)("td",{className:i(r,{rowIndex:a,columnIndex:u}),onClick:function(){return function(r){var i,a=o&&o.rowIndex===r.rowIndex&&o.columnIndex===r.columnIndex,u=t[r.rowIndex][r.columnIndex],s=(null===u||void 0===u||null===(i=u.piece)||void 0===i?void 0:i.color)===n,f=F(r),d=l.find((function(n){var r,t;return(null===(r=n.move)||void 0===r?void 0:r.from)===e.selectedPlayingSquareIndex&&(null===(t=n.move)||void 0===t?void 0:t.to)===f})),m=null===d||void 0===d?void 0:d.move,v=m?te(m):oe(a||!s?null:r);c(v)}({rowIndex:a,columnIndex:u})},children:[r&&r.piece&&Object(f.jsx)(m,{color:r.piece.color,rank:r.piece.rank}),Object(f.jsx)("span",{className:j.a.squareIndex,children:F({rowIndex:a,columnIndex:u})})]},"[".concat(a,"][").concat(u,"]"))}))},"[".concat(a,"]"))}))})}),Object(f.jsxs)("div",{children:["Turn: ",n||"none"]}),Object(f.jsxs)("div",{children:["Valid moves:",l.map((function(e){var n,r;return"".concat(null===(n=e.move)||void 0===n?void 0:n.from," \u2192 ").concat(null===(r=e.move)||void 0===r?void 0:r.to)})).join(", ")]}),Object(f.jsxs)("div",{children:["Winner: ",(null===r||void 0===r?void 0:r.resultantWinner)||"none"]})]})}r(26);var ie=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(ce,{})})},ae=Object(w.a)({reducer:{game:le}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(x.a,{store:ae,children:Object(f.jsx)(ie,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,n,r){e.exports={gameSquare:"Game_gameSquare__1dGwF",gameSquarePlaying:"Game_gameSquarePlaying__3yjtI",gameSquareNonPlaying:"Game_gameSquareNonPlaying__taBs7",gameSquareSelected:"Game_gameSquareSelected__2l6KE",squareIndex:"Game_squareIndex__1-u-K"}},6:function(e,n,r){e.exports={piece:"Piece_piece__2pkac"}}},[[27,1,2]]]);
//# sourceMappingURL=main.7fe00749.chunk.js.map